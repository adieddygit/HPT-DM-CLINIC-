{% extends "base.html" %}
{% block title %} Login {% endblock title %}
{% block head %}
    {% block stylesheet %}{% endblock stylesheet %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css')}}">
    {{super()}}
    {% block script %}{% endblock script %}
{% endblock head %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <img src="{{ url_for('static', filename='images/avatar.png') }}" alt="Patient Avatar" class="profile-avatar">
        <h1>{{ patient.username }}</h1>
        <p><strong>Role:</strong> {{ patient.role }}</p>
        <p><strong>Email:</strong> {{ patient.email }}</p>
        <p><strong>Phone:</strong> {{ patient.phone }}</p>
        <button class="btn-edit" onclick="window.location.href='/edit_patient/{{ patient.id }}'">Edit Profile</button>
    </div>

    <div class="profile-body">
        <h2>Personal Information</h2>
        <table class="info-table">
            <tr>
                <th>Date of Birth:</th>
                <td>{{ patient.dob }}</td>
            </tr>
            <tr>
                <th>Address:</th>
                <td>{{ patient.address }}</td>
            </tr>
            <tr>
                <th>Gender:</th>
                <td>{{ patient.gender }}</td>
            </tr>
        </table>

        <h2>Medical History</h2>
        <table class="info-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Diagnosis</th>
                    <th>Treatment</th>
                </tr>
            </thead>
            <tbody>
                {% for record in medical_history %}
                <tr>
                    <td>{{ record.date }}</td>
                    <td>{{ record.diagnosis }}</td>
                    <td>{{ record.treatment }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h2>Appointment Records</h2>
        <table class="info-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Doctor</th>
                    <th>Purpose</th>
                </tr>
            </thead>
            <tbody>
                {% for appointment in appointments %}
                <tr>
                    <td>{{ appointment.date }}</td>
                    <td>{{ appointment.doctor }}</td>
                    <td>{{ appointment.purpose }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}

{% block footer %}
    {{super()}}
{% endblock footer %}